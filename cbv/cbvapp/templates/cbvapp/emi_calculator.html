{% extends 'base.html' %}
{% block title %}EMI Calculator{% endblock %}
{% block content %}

<style>
    body{
        background: linear-gradient(135deg, #eef2f7, #dbe7ff);
    }

    .emi-card{
        border-radius: 22px;
        border: none;
    }

    .emi-header{
        font-weight: 700;
        letter-spacing: 0.5px;
    }

    .readonly{
        background-color: #f1f3f5;
        font-weight: 600;
    }

    .result-box{
        background: linear-gradient(135deg, #e6fff2, #d1f5e0);
        border-radius: 16px;
        padding: 20px;
        margin-top: 20px;
        text-align: center;
    }

    .result-box h3{
        font-weight: 800;
        color: #198754;
    }

    .form-label{
        font-weight: 600;
    }

    .btn-calc{
        border-radius: 14px;
        padding: 10px;
        font-weight: 600;
    }
</style>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-7 col-lg-6">

            <div class="card emi-card shadow-lg p-4 p-md-5">

                <!-- HEADER -->
                <div class="text-center mb-4">
                    <h3 class="emi-header text-primary">
                        üí≥ EMI Calculator
                    </h3>
                    <p class="text-muted mb-0">
                        Calculate your monthly installment
                    </p>
                </div>

                <!-- FORM -->
                <form method="post">
                    {% csrf_token %}

                    <!-- PRODUCT -->
                    <div class="mb-3">
                        <label class="form-label">Product</label>
                        <input type="text"
                               class="form-control readonly"
                               value="{{ product.product_name }}"
                               readonly>
                    </div>

                    <!-- COMPANY -->
                    <div class="mb-3">
                        <label class="form-label">Company</label>
                        <input type="text"
                               class="form-control readonly"
                               value="{{ product.company.name }}"
                               readonly>
                    </div>

                    <!-- PRICE -->
                    <div class="mb-3">
                        <label class="form-label">Price (‚Çπ)</label>
                        <input type="text"
                               class="form-control readonly"
                               value="{{ product.price }}"
                               readonly>
                    </div>

                    <!-- LOAN AMOUNT -->
                    <div class="mb-3">
                        <label class="form-label">Loan Amount (‚Çπ)</label>
                        <input type="number"
                               name="loan_amount"
                               class="form-control"
                               value="{{ loan_amount|default:product.price }}"
                               required>
                    </div>

                    <!-- TENURE -->
                    <div class="mb-4">
                        <label class="form-label">Tenure (Years)</label>
                        <select name="tenure" class="form-select" required>
                            <option value="">Select tenure</option>
                            <option value="1" {% if tenure == 1 %}selected{% endif %}>1 Year</option>
                            <option value="2" {% if tenure == 2 %}selected{% endif %}>2 Years</option>
                            <option value="3" {% if tenure == 3 %}selected{% endif %}>3 Years</option>
                            <option value="5" {% if tenure == 5 %}selected{% endif %}>5 Years</option>
                            <option value="7" {% if tenure == 7 %}selected{% endif %}>7 Years</option>
                            <option value="10" {% if tenure == 10 %}selected{% endif %}>10 Years</option>
                        </select>
                    </div>

                    <!-- BUTTON -->
                    <button type="submit" class="btn btn-primary w-100 btn-calc">
                        Calculate EMI
                    </button>
                </form>

                <!-- RESULT -->
                {% if emi %}
                <div class="result-box mt-4 shadow-sm">
                    <h6 class="text-muted mb-1">Monthly EMI</h6>
                    <h3>‚Çπ {{ emi }}</h3>
                    <p class="mb-0 text-muted">
                        Loan ‚Çπ {{ loan_amount }} ‚Ä¢ {{ tenure }} Years
                    </p>
                </div>
                {% endif %}

                <!-- BACK -->
                <div class="text-center mt-4">
                    <a href="javascript:history.back()" class="btn btn-outline-secondary">
                        ‚Üê Back to Products
                    </a>
                </div>

            </div>

        </div>
    </div>
</div>

{% endblock %}
